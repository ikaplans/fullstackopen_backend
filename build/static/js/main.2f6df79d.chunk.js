(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{17:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(16),u=n.n(r),o=n(6),i=n(2),l=function(e){var t=e.persons,n=e.addPerson,r=e.updatePerson,u=Object(a.useState)(""),o=Object(i.a)(u,2),l=o[0],s=o[1],d=Object(a.useState)(""),m=Object(i.a)(d,2),f=m[0],p=m[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"Add a new"),c.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),l){var a=t.find((function(e){return e.name===l}));void 0!==a?window.confirm("".concat(a.name," is already added to phonebook, replace the old number with a new one?"))&&r(Object.assign({},a,{number:f})):n({name:l,number:f}),s(""),p("")}}},c.a.createElement("div",null,c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:l,onChange:function(e){s(e.target.value)}})),c.a.createElement("div",null,"number:",c.a.createElement("input",{value:f,onChange:function(e){p(e.target.value)}}))),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add"))))},s=function(e){var t=e.applyFilter,n=Object(a.useState)(""),r=Object(i.a)(n,2),u=r[0],o=r[1];return c.a.createElement("div",null,"filter shown with:",c.a.createElement("input",{value:u,onChange:function(e){o(e.target.value),t(e.target.value)}}))},d=function(e){var t=e.persons,n=e.textFilter,a=e.deletePerson;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"Numbers"),t.filter((function(e){return!n||e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return c.a.createElement("div",{key:e.name},"".concat(e.name," ").concat(e.number),c.a.createElement("button",{onClick:function(){var t;t=e,window.confirm("Are you sure you want to delete ".concat(t.name," ?"))&&a(t)}},"delete"))})))},m=n(4),f=n.n(m),p=function(){return f.a.get("".concat("/api","/persons")).then((function(e){return e.data}))},b=function(e){return f.a.post("".concat("/api","/persons"),e).then((function(e){return e.data}))},v=function(e){return f.a.delete("".concat("/api","/persons/").concat(e.id))},E=function(e){return f.a.put("".concat("/api","/persons/").concat(e.id),e)},h=function(e){var t=e.message;return null===t||void 0===t?null:c.a.createElement("div",{className:t.isSuccess?"successMessage":"errorMessage"},t.text)},g=(n(39),function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],u=Object(a.useState)(""),m=Object(i.a)(u,2),f=m[0],g=m[1],j=Object(a.useState)(),O=Object(i.a)(j,2),w=O[0],S=O[1],y=function(e,t){S({isSuccess:t,text:e}),setTimeout((function(){S(null)}),5e3)};return Object(a.useEffect)((function(){p().then((function(e){r(e)}))}),[]),c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(h,{message:w}),c.a.createElement(s,{applyFilter:function(e){g(e)}}),c.a.createElement(l,{persons:n,addPerson:function(e){var t=!0,a="TEMPID_"+e.name,c=Object.assign({},e,{id:a}),u=n.concat(c);r(u),b(e).then((function(e){c.id=e.id})).catch((function(e){t=!1,y(e.response.data.error,!1),r(u.filter((function(e){return e.id!==a})))})),t&&y("Successfully added ".concat(e.name),!0)},updatePerson:function(e){var t=!0,a=Object.assign({},n.find((function(t){return t.id===e.id}))),c=Object(o.a)(n.map((function(t){return t.id===e.id?e:t})));r(c),E(e).catch((function(n){t=!1,y(n.response.data.error,!1),r(Object(o.a)(c.map((function(t){return t.id===e.id?a:t}))))})),t&&y("Successfully updated ".concat(e.name),!0)}}),c.a.createElement(d,{persons:n,textFilter:f,deletePerson:function(e){var t=!0,a=Object.assign({},n.find((function(t){return t.id===e.id}))),c=n.filter((function(t){return t.id!==e.id}));r(c),v(e).catch((function(e){t=!1,y(e.response.data.error,!1),r(c.concat(a))})),t&&y("Successfully deleted ".concat(e.name),!0)}}))});u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(g,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.2f6df79d.chunk.js.map