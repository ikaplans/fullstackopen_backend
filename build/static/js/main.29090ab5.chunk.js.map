{"version":3,"sources":["components/NumberForm.js","components/NumberFilter.js","components/NumberDirectory.js","service/Persons.js","components/Notification.js","components/App.js","index.js"],"names":["NumberForm","persons","addPerson","updatePerson","useState","newName","setNewName","newPhone","setNewPhone","onSubmit","event","preventDefault","existingPerson","find","x","name","undefined","window","confirm","Object","assign","number","value","onChange","target","type","NumberFilter","applyFilter","filterText","setFilterText","NumberDirectory","textFilter","deletePerson","filter","toLowerCase","includes","map","key","onClick","person","axios","get","then","response","data","post","delete","id","put","Notification","message","className","isSuccess","text","App","setPersons","setTextFilter","notificationMessage","setNotificationMessage","showNotificationMessage","setTimeout","useEffect","personService","newPerson","success","tempId","newPersonTemp","newPersons","concat","res","catch","error","originalData","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.29090ab5.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nconst NumberForm = ({ persons, addPerson, updatePerson }) => {\n  const [newName, setNewName] = useState(\"\");\n  const [newPhone, setNewPhone] = useState(\"\");\n\n  const onAddPerson = (event) => {\n    event.preventDefault();\n    if (!newName) {\n      return;\n    }\n    const existingPerson = persons.find((x) => x.name === newName);\n    if (existingPerson !== undefined) {\n      if (\n        window.confirm(\n          `${existingPerson.name} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        updatePerson(Object.assign({}, existingPerson, { number: newPhone }));\n      }\n    } else {\n      addPerson({ name: newName, number: newPhone });\n    }\n    setNewName(\"\");\n    setNewPhone(\"\");\n  };\n\n  const handleNewNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNewPhoneChange = (event) => {\n    setNewPhone(event.target.value);\n  };\n\n  return (\n    <>\n      <h2>Add a new</h2>\n      <form onSubmit={onAddPerson}>\n        <div>\n          <div>\n            name: <input value={newName} onChange={handleNewNameChange} />\n          </div>\n          <div>\n            number:\n            <input value={newPhone} onChange={handleNewPhoneChange} />\n          </div>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </>\n  );\n};\n\nexport default NumberForm;\n","import React, { useState } from \"react\";\n\nconst NumberFilter = ({ applyFilter }) => {\n  const [filterText, setFilterText] = useState(\"\");\n  const handleFilterTextChange = (event) => {\n    setFilterText(event.target.value);\n    applyFilter(event.target.value);\n  };\n  return (\n    <div>\n      filter shown with:\n      <input value={filterText} onChange={handleFilterTextChange} />\n    </div>\n  );\n};\n\nexport default NumberFilter;\n","import React from \"react\";\n\nconst NumberDirectory = ({ persons, textFilter, deletePerson }) => {\n  const onDeletePerson = (person) => {\n    if (!window.confirm(`Are you sure you want to delete ${person.name} ?`)) {\n      return;\n    }\n    deletePerson(person);\n  };\n  return (\n    <>\n      <h2>Numbers</h2>\n      {persons\n        .filter(\n          (x) =>\n            !textFilter ||\n            x.name.toLowerCase().includes(textFilter.toLowerCase())\n        )\n        .map((x) => (\n          <div key={x.name}>\n            {`${x.name} ${x.number}`}\n            <button\n              onClick={() => {\n                onDeletePerson(x);\n              }}\n            >\n              delete\n            </button>\n          </div>\n        ))}\n    </>\n  );\n};\n\nexport default NumberDirectory;\n","import axios from \"axios\";\nconst baseUrl = \"/api\";\n\nconst all = () => {\n  return axios.get(`${baseUrl}/persons`).then((response) => response.data);\n};\n\nconst create = (person) => {\n  return axios\n    .post(`${baseUrl}/persons`, person)\n    .then((response) => response.data);\n};\n\nconst remove = (person) => {\n  return axios.delete(`${baseUrl}/persons/${person.id}`);\n};\n\nconst update = (person) => {\n  return axios.put(`${baseUrl}/persons/${person.id}`, person);\n};\n\nexport default { all, create, remove, update };\n","import React from \"react\";\n\nconst Notification = ({ message }) => {\n  if (message === null || message === undefined) {\n    return null;\n  }\n\n  return (\n    <div className={message.isSuccess ? \"successMessage\" : \"errorMessage\"}>\n      {message.text}\n    </div>\n  );\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport NumberForm from \"./NumberForm\";\nimport NumberFilter from \"./NumberFilter\";\nimport NumberDirectory from \"./NumberDirectory\";\nimport personService from \"../service/Persons\";\nimport Notification from \"./Notification\";\nimport \"../index.css\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [textFilter, setTextFilter] = useState(\"\");\n  const [notificationMessage, setNotificationMessage] = useState();\n\n  const showNotificationMessage = (message, isSuccess) => {\n    setNotificationMessage({ isSuccess: isSuccess, text: message });\n    setTimeout(() => {\n      setNotificationMessage(null);\n    }, 5000);\n  };\n\n  const addPerson = (newPerson) => {\n    let success = true;\n    const tempId = \"TEMPID_\" + newPerson.name;\n    const newPersonTemp = Object.assign({}, newPerson, { id: tempId });\n    const newPersons = persons.concat(newPersonTemp);\n    setPersons(newPersons);\n    personService\n      .create(newPerson)\n      .then((res) => {\n        newPersonTemp.id = res.id;\n      })\n      .catch((error) => {\n        success = false;\n        showNotificationMessage(\n          `Encountered an error while adding ${newPerson.name}`,\n          false\n        );\n        setPersons(newPersons.filter((x) => x.id !== tempId));\n      });\n    if (success) {\n      showNotificationMessage(`Successfully added ${newPerson.name}`, true);\n    }\n  };\n\n  const updatePerson = (person) => {\n    let success = true;\n    const originalData = Object.assign(\n      {},\n      persons.find((x) => x.id === person.id)\n    );\n    const newPersons = [\n      ...persons.map((x) => (x.id === person.id ? person : x)),\n    ];\n    setPersons(newPersons);\n    personService.update(person).catch((error) => {\n      success = false;\n      showNotificationMessage(\n        `Encountered an error while updating ${person.name}`,\n        false\n      );\n      setPersons([\n        ...newPersons.map((x) => (x.id === person.id ? originalData : x)),\n      ]);\n    });\n    if (success) {\n      showNotificationMessage(`Successfully updated ${person.name}`, true);\n    }\n  };\n\n  const deletePerson = (person) => {\n    let success = true;\n    const originalData = Object.assign(\n      {},\n      persons.find((x) => x.id === person.id)\n    );\n    const newPersons = persons.filter((x) => x.id !== person.id);\n    setPersons(newPersons);\n    personService.remove(person).catch((error) => {\n      success = false;\n      showNotificationMessage(\n        `Encountered an error while deleting ${person.name}`,\n        false\n      );\n      setPersons(newPersons.concat(originalData));\n    });\n    if (success) {\n      showNotificationMessage(`Successfully deleted ${person.name}`, true);\n    }\n  };\n\n  const applyFilter = (filterText) => {\n    setTextFilter(filterText);\n  };\n\n  useEffect(() => {\n    personService.all().then((data) => {\n      setPersons(data);\n    });\n  }, []);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notificationMessage} />\n      <NumberFilter applyFilter={applyFilter} />\n      <NumberForm\n        persons={persons}\n        addPerson={addPerson}\n        updatePerson={updatePerson}\n      />\n      <NumberDirectory\n        persons={persons}\n        textFilter={textFilter}\n        deletePerson={deletePerson}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}