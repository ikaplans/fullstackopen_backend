(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{17:function(e,n,t){e.exports=t(40)},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),r=t(16),u=t.n(r),o=t(6),i=t(2),l=function(e){var n=e.persons,t=e.addPerson,r=e.updatePerson,u=Object(a.useState)(""),o=Object(i.a)(u,2),l=o[0],s=o[1],d=Object(a.useState)(""),m=Object(i.a)(d,2),f=m[0],p=m[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"Add a new"),c.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),l){var a=n.find((function(e){return e.name===l}));void 0!==a?window.confirm("".concat(a.name," is already added to phonebook, replace the old number with a new one?"))&&r(Object.assign({},a,{number:f})):t({name:l,number:f}),s(""),p("")}}},c.a.createElement("div",null,c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:l,onChange:function(e){s(e.target.value)}})),c.a.createElement("div",null,"number:",c.a.createElement("input",{value:f,onChange:function(e){p(e.target.value)}}))),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add"))))},s=function(e){var n=e.applyFilter,t=Object(a.useState)(""),r=Object(i.a)(t,2),u=r[0],o=r[1];return c.a.createElement("div",null,"filter shown with:",c.a.createElement("input",{value:u,onChange:function(e){o(e.target.value),n(e.target.value)}}))},d=function(e){var n=e.persons,t=e.textFilter,a=e.deletePerson;return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"Numbers"),n.filter((function(e){return!t||e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return c.a.createElement("div",{key:e.name},"".concat(e.name," ").concat(e.number),c.a.createElement("button",{onClick:function(){var n;n=e,window.confirm("Are you sure you want to delete ".concat(n.name," ?"))&&a(n)}},"delete"))})))},m=t(4),f=t.n(m),p=function(){return f.a.get("".concat("/api","/persons")).then((function(e){return e.data}))},b=function(e){return f.a.post("".concat("/api","/persons"),e).then((function(e){return e.data}))},E=function(e){return f.a.delete("".concat("/api","/persons/").concat(e.id))},v=function(e){return f.a.put("".concat("/api","/persons/").concat(e.id),e)},h=function(e){var n=e.message;return null===n||void 0===n?null:c.a.createElement("div",{className:n.isSuccess?"successMessage":"errorMessage"},n.text)},g=(t(39),function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],u=Object(a.useState)(""),m=Object(i.a)(u,2),f=m[0],g=m[1],j=Object(a.useState)(),O=Object(i.a)(j,2),w=O[0],S=O[1],y=function(e,n){S({isSuccess:n,text:e}),setTimeout((function(){S(null)}),5e3)};return Object(a.useEffect)((function(){p().then((function(e){r(e)}))}),[]),c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(h,{message:w}),c.a.createElement(s,{applyFilter:function(e){g(e)}}),c.a.createElement(l,{persons:t,addPerson:function(e){var n=!0,a="TEMPID_"+e.name,c=Object.assign({},e,{id:a}),u=t.concat(c);r(u),b(e).then((function(e){c.id=e.id})).catch((function(t){n=!1,y("Encountered an error while adding ".concat(e.name),!1),r(u.filter((function(e){return e.id!==a})))})),n&&y("Successfully added ".concat(e.name),!0)},updatePerson:function(e){var n=!0,a=Object.assign({},t.find((function(n){return n.id===e.id}))),c=Object(o.a)(t.map((function(n){return n.id===e.id?e:n})));r(c),v(e).catch((function(t){n=!1,y("Encountered an error while updating ".concat(e.name),!1),r(Object(o.a)(c.map((function(n){return n.id===e.id?a:n}))))})),n&&y("Successfully updated ".concat(e.name),!0)}}),c.a.createElement(d,{persons:t,textFilter:f,deletePerson:function(e){var n=!0,a=Object.assign({},t.find((function(n){return n.id===e.id}))),c=t.filter((function(n){return n.id!==e.id}));r(c),E(e).catch((function(t){n=!1,y("Encountered an error while deleting ".concat(e.name),!1),r(c.concat(a))})),n&&y("Successfully deleted ".concat(e.name),!0)}}))});u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(g,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.29090ab5.chunk.js.map